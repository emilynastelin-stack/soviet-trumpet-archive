<!DOCTYPE html><html lang="en" data-astro-cid-j7pv25f6> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Soviet Trumpet Archive — Sheet Table</title><style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial;padding:18px}table[data-astro-cid-j7pv25f6]{border-collapse:collapse;width:100%;margin-bottom:20px}th[data-astro-cid-j7pv25f6],td[data-astro-cid-j7pv25f6]{border:1px solid #ddd;padding:8px;text-align:left}th[data-astro-cid-j7pv25f6]{background:#f3f4f6}caption[data-astro-cid-j7pv25f6]{font-weight:700;margin-bottom:8px}.accordion-item[data-astro-cid-j7pv25f6]{border-bottom:1px solid #ddd}.accordion-header[data-astro-cid-j7pv25f6]{cursor:pointer;padding:10px;font-weight:700;background:#f9f9f9}.accordion-content[data-astro-cid-j7pv25f6]{overflow:hidden;max-height:0;transition:max-height .3s ease;padding:0 10px}.accordion-header[data-astro-cid-j7pv25f6].active{background:#e5e7eb}.accordion-content[data-astro-cid-j7pv25f6] p[data-astro-cid-j7pv25f6]{margin:8px 0}
</style></head> <body data-astro-cid-j7pv25f6> <h1 data-astro-cid-j7pv25f6>Success</h1> <p data-astro-cid-j7pv25f6>Live table from the spreadsheet — loading below.</p> <div id="table-wrap" data-astro-cid-j7pv25f6> <table id="data-table" data-astro-cid-j7pv25f6> <caption data-astro-cid-j7pv25f6>Composers</caption> <thead id="data-head" data-astro-cid-j7pv25f6></thead> <tbody id="data-body" data-astro-cid-j7pv25f6></tbody> </table> </div> <div id="results" data-astro-cid-j7pv25f6></div> <script type="module">console.log("Live data script loaded");async function u(){try{const n=await(await fetch("/api/sheets?t="+Date.now())).json();console.log("Fetched data:",n);const i=document.getElementById("data-head"),d=document.getElementById("data-body");if(i.innerHTML="",d.innerHTML="",!n||n.length===0){d.innerHTML='<tr><td colspan="99">No data</td></tr>';return}const l=Object.keys(n[0]),m=document.createElement("tr");l.forEach(c=>{const t=document.createElement("th");t.textContent=c,m.appendChild(t)}),i.appendChild(m),n.forEach(c=>{const t=document.createElement("tr");l.forEach(o=>{const e=document.createElement("td");e.textContent=c[o]??"",t.appendChild(e)}),d.appendChild(t)});const h=document.getElementById("results");h.innerHTML="",n.forEach(c=>{const t=c.Composer||c.Композитор||"—",o=document.createElement("div");o.className="accordion-item";const e=document.createElement("div");e.className="accordion-header",e.textContent=t,o.appendChild(e);const a=document.createElement("div");a.className="accordion-content",a.innerHTML=`<p>${t}</p>`,o.appendChild(a),e.addEventListener("click",()=>{const p=e.classList.contains("active");document.querySelectorAll(".accordion-header").forEach(r=>r.classList.remove("active")),document.querySelectorAll(".accordion-content").forEach(r=>r.style.maxHeight=null),p||(e.classList.add("active"),a.style.maxHeight=a.scrollHeight+"px")}),h.appendChild(o)})}catch(s){console.error("Render failed",s)}}u();</script> </body> </html>