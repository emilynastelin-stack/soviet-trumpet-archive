<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Soviet Trumpet Archive results</title>
  <style>
    :root { --accent:#8b0000; --muted:#6b7280; --bg:#f7f9fc; }
    * { box-sizing:border-box; }
    body { padding-bottom:64px; background:var(--bg); }
    header { background:white; border-bottom:1px solid #e6e9ef; position:sticky; top:0; z-index:30; }
    header .container { width:100%; max-width:none; margin:0; padding:12px 20px; }
    /* Layout for main content: 3 columns on desktop, single column on mobile
       (scope to .container that is NOT the nav/header .container) */
    .container:not(.nav) {
      display: grid;
      grid-template-columns: 240px 1fr 320px;
      gap: 24px;
      max-width: 1100px;
      margin: 20px auto;
      /* inset side panels 15px further than the search bar (search-bar uses 20px) */
      padding: 0 35px;
      align-items: start;
    }
    /* Make side panels visually distinct and readable */
    .filters, .composer-box {
      background: #fff;
      padding: 12px;
      border: 1px solid #e6e9ef;
      border-radius: 8px;
    }
    .filters { width: 100%; }
    .composer-box { width: 100%; }
    .results { width: 100%; }
    /* Make the filters sticky under the header for easier use */
    .filters { position: sticky; top: 72px; align-self: start; }

  .result-item { border-bottom: 1px solid #e6e9ef; padding: 1rem 0; }
    .result-item:last-child { border-bottom: none; }
    .result-item h2 { font-size: 1.2rem; margin: 0; color: #004d7a; cursor: pointer; }
    .result-item p { margin: 0.25rem 0; }
    strong, .filters h3 strong { color: var(--accent); font-weight:700; }
  footer { background: #004d7a; color: white; text-align: center; padding: 1rem; margin-top: 2rem; font-size: 0.9rem; }

  /* Search bar styling */
  .search-bar { max-width: 1100px; margin: 12px auto; padding: 0 20px; display:flex; gap:8px; align-items:center; }
  .search-bar input[type=text] { flex:1; padding:10px 12px; border:1px solid #e6e9ef; border-radius:6px; font-size:1rem; }
  .search-bar button { padding:10px 14px; border-radius:6px; border:1px solid #d1d5db; background:#fff; cursor:pointer; }
  .section-header { font-weight:600; margin:0 0 8px 0; }
  /* Results card to improve contrast on busy pages */
  .results { background:#fff; padding:12px; border:1px solid #e6e9ef; border-radius:8px; }

    /* Responsive: stack columns on narrow viewports */
    @media (max-width: 900px) {
      /* keep the same 15px inset on mobile (search-bar uses 12px mobile) */
      .container:not(.nav) { grid-template-columns: 1fr; padding: 0 27px; }
      .filters { position: relative; top: auto; }
      .composer-box { order: 3; }
      .results { order: 2; }
    }
  </style>
</head>
<body>

  <!-- background removed per request -->

  <header>
    <div class="container nav" style="display:flex;justify-content:space-between;align-items:center">
      <div class="logo">
        <span class="nav-english" id="navEnglish">Archive of Soviet Trumpet Music</span>
        <span class="nav-pipe">|</span>
        <span class="nav-russian" id="navRussian">Архив советской трубной музыки</span>
      </div>
      <div class="lang-toggle" id="langToggle">
        <button class="lang-btn" id="langBtn">EN ▾</button>
        <div class="lang-dropdown" id="langDropdown">
          <div class="lang-option" data-locale="en">English</div>
          <div class="lang-option" data-locale="de">Deutsch</div>
        </div>
      </div>
    </div>
  </header>

  <div class="search-bar">
    <input id="qinput" type="text" placeholder="Search ProQuest...">
    <button id="qbtn">Search</button>
  </div>

  <div class="container">
    <aside class="filters">
      <h3 class="section-header"><strong>Filters</strong></h3>
      <div class="section-divider"></div>
      <h4 class="section-header" style="font-weight:600;margin-top:6px;margin-bottom:6px;"><strong>Country</strong></h4>
      <div class="section-divider"></div>
      <div id="filter-country" style="margin-bottom:12px;">&nbsp;</div>

      <h4 class="section-header" style="font-weight:600;margin-top:6px;margin-bottom:6px;"><strong>Decade</strong></h4>
      <div class="section-divider"></div>
      <div id="filter-decade" style="margin-bottom:12px;">&nbsp;</div>

      <h4 class="section-header" style="font-weight:600;margin-top:6px;margin-bottom:6px;"><strong>Type of piece</strong></h4>
      <div class="section-divider"></div>
      <div id="filter-type" style="margin-bottom:12px;">&nbsp;</div>
    </aside>

    <main class="results" id="results">
      <div class="results-header" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
        <h3 class="section-header">Results</h3>
        <div id="results-pagination-top" style="display:flex;align-items:center;justify-content:flex-end;"></div>
      </div>
      <div class="section-divider"></div>
      <div id="results-list">
        <div class="result-item"><em>Loading results…</em></div>
      </div>
    </main>

    <aside class="composer-box" id="composer-box">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
        <h3 class="section-header">Composer</h3>
        <div style="margin-left:auto;">
          <button id="clear-composer" style="display:none;padding:6px 10px;border-radius:6px;border:1px solid #d1d5db;background:#fff;">Clear composer</button>
        </div>
      </div>
      <div class="section-divider"></div>
      <div id="composer-content" style="margin-top:8px;">Select a result to view composer details.</div>
    </aside>
  </div>

  <div id="fixed-footer" aria-hidden="false" role="contentinfo">
    <div class="fixed-footer-inner">
      <div class="footer-left">
        <div class="title">Archive of Soviet Trumpet Music</div>
        <div class="subtitle">Архив советской трубной музыки</div>
      </div>
      <div class="fixed-footer-center">
        <div class="links">
          <a href="/about">About</a>
          <a href="#">Contact</a>
          <a href="#">Help</a>
        </div>
      </div>
      <div class="fixed-footer-right">
        <div class="copyright">© 2025 Archive of Soviet Trumpet Music</div>
      </div>
    </div>
  </div>

  <!-- load extracted client script -->
  <script src="/composers-results.client.js" defer></script>

</body>
</html>
