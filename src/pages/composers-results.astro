---
import ComposersPage from "../components/ComposersPage.jsx";
---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Composers results - Archive of Soviet Trumpet Music</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/composers.css">
      <style>
    :root { --accent:#8b0000; --muted:#6b7280; --bg:#f7f9fc; }
    /* Mobile panel script moved to /composers-results.inline.1.js to avoid SSR parsing */

    /* Mobile topbar (fixed) */
    .mobile-topbar {
      padding: 16px;
      position: fixed;
      z-index: 1300;
      box-shadow: 0 -6px 18px rgba(0,0,0,0.08);
      font-size: 15px;
      width: 100%;
      background: #fff;
      top: 48px;
    }

    /* Toggle button - only show on mobile */
    .mobile-toggle { display: none; border:0; background:transparent; font-size:16px; cursor:pointer; padding:6px 8px; }

    /* Three-panel layout: left filter, center results, right composer */
    .three-panels { display:flex; gap:20px; align-items:flex-start; box-sizing:border-box; max-width:1200px; margin: 120px auto 20px; padding: 0 16px; }
    .panel { box-sizing:border-box; }
    .filter-panel { flex: 0 0 270px; width: 270px; background: #fff; border-radius: 8px; padding: 14px; box-shadow: 0 6px 12px rgba(15,23,42,0.04); }
    #panel-center { flex: 1 1 auto; min-width: 0; background: #fff; border-radius:8px; padding: 14px; box-shadow: 0 6px 12px rgba(15,23,42,0.04); }
    #panel-right { flex: 0 0 320px; width: 320px; background: #fff; border-radius:8px; padding: 14px; box-shadow: 0 6px 12px rgba(15,23,42,0.04); }

    <!-- Mobile panel script moved to /public/composers-results.inline.1.js to avoid SSR parsing and duplicates -->
    <script src="/composers-results.inline.1.js" defer></script>
    </div>
  </div>

    <!-- Mobile toolbar: Filters | Hamburger menu (center) | Sources -->
    <div class="mobile-footer-toolbar" id="mobileFooterToolbar" aria-hidden="false">
      <button class="mf-btn" id="mf-filters">Filters</button>
      <button class="mf-center" id="mf-hamburger" aria-label="Menu" aria-expanded="false">☰</button>
  <!-- composers button removed -->
    </div>

    <!-- Left-edge swipe menu overlay (sliding panel) -->
    <div id="mobile-swipe-menu" class="mobile-swipe-menu" aria-hidden="true">
      <div class="swipe-inner" role="menu" aria-label="Quick menu">
        <button id="swm-close" class="swm-close">Close</button>
        <div style="padding:12px">
          <button id="swm-about" class="swm-item">About</button>
          <button id="swm-composers" class="swm-item">Composers</button>
          <button id="swm-home" class="swm-item">Home</button>
        </div>
      </div>
    </div>

  <!--
    Client runtime (heavy): /public/composers-results.client.js
    - This external script performs data fetching (/api/sheets), normalization,
      filtering, pagination, and renders the center panel items dynamically.
    - If you need to change client-side rendering logic for the center panel
      or the card layout, edit the client script (public/composers-results.client.js)
      NOT the server page. The client script will insert nodes matching the
      .result-card/.result-main/.result-right structure defined above.
  -->
  <script src="/composers-results.client.js?v=3" defer></script>
    <!-- background overlay (behind everything) -->
    <div id="bg-overlay" aria-hidden="true">
      <img id="bg-img" src="https://i.imgur.com/ZENogwV.png" alt="" />
    </div>
    <!-- Inline page scripts moved to /composers-results.inline.1.js to avoid SSR parsing -->
    
    <!-- Hydrate the React ComposersPage client-side for debugging and to enable client-only behavior -->
    <div id="composers-client-mount" style="display:none; visibility:hidden; width:0; height:0; overflow:hidden;">
      <!-- This intentionally hydrates the React component offscreen so its useEffects run -->
      <ComposersPage client:load />
    </div>
    
      <!-- Mobile side panel markup (moved from composers.astro) -->
  <div id="mobileSidePanel" aria-hidden="true" role="region" style="display:none">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="font-weight:700;color:var(--accent)">Composer details</div>
          <button id="closePanelBtn" aria-label="Close" style="border:0;background:transparent;font-size:18px;cursor:pointer;">✕</button>
        </div>
        <div id="mobilePanelContent" style="margin-top:12px">Select a composer to view details.</div>
      </div>

    <!-- Mobile panel script moved to /public/composers-results.inline.1.js to avoid SSR parsing and duplicates -->
    <script src="/composers-results.inline.1.js" defer></script>

