---
import SiteHeader from '../components/SiteHeader.astro';
import SiteFooter from '../components/SiteFooter.astro';
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Soviet Trumpet Archive</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet" />

    <style>
      :root { --accent:#8b0000; --muted:#6b7280; --bg:#f7f9fc; }
      * { box-sizing:border-box; }

      html, body {
        height: 100%;
        margin: 0;
        display: flex;
        flex-direction: column;
        font-family: Inter, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        color: #0f172a;
        background-color: var(--bg);
        padding-bottom: env(safe-area-inset-bottom, 0px);
      }

      /* Tint box (desktop) */
      .tint-box {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        background-color: rgba(186,171,157,0.75);
        width: 100%;
        max-width: 900px;
        margin: 0 auto;
        padding-top: 64px;
        position: relative;
        z-index: 10;
      }

      .mast { width:100%; display:flex; justify-content:center; position:relative; z-index:20; }
      .mast img { width:66%; max-width:532px; height:auto; object-fit:cover; display:block; z-index:25; padding-top:20px; }

      /* Search panel */
      .search-panel {
        margin:20px auto;
        width:calc(100% - 30px);
        max-width:900px;
        background:white;
        border-radius:12px;
        box-shadow:0 6px 18px rgba(16,24,40,0.06);
        padding:28px;
        display:flex;
        flex-direction:column;
        gap:16px;
        position: relative;
        z-index: 11;
      }

      .search-row { display:flex; gap:12px; flex-wrap:wrap; }
      .search-input { flex:1; padding:14px 16px; border-radius:10px; border:1px solid #e5e7eb; font-size:16px; background-color:#fff; }
      .search-cta { padding:12px 18px; border-radius:10px; background:var(--accent); color:white; border:none; font-weight:700; cursor:pointer; }

      .cta-row { display:flex; gap:12px; justify-content:space-between; flex-wrap:wrap; }
      .cta-btn { flex:1; padding:12px 16px; background:rgba(139,0,0,0.75); color:white; border:none; border-radius:10px; font-weight:700; cursor:pointer; text-align:center; transition:background 0.2s ease; }
      .cta-btn:hover { background:rgba(161,0,0,0.75); }

      /* Background overlay */
      #bg-overlay {
        position: fixed;
        inset: 0;
        z-index: 0;
        overflow: hidden;
        pointer-events: none;
      }

      #bg-img-desktop {
        position: absolute;
        width: 100vw;
        height: 100vh;
        object-fit: cover;
        pointer-events: none;
        transition: opacity 0.4s ease;
        opacity: 1;
      }

      #bg-img-mobile {
        position: absolute;
        width: 100vw;
        height: 100vh;
        object-fit: cover;
        pointer-events: none;
        transition: opacity 0.4s ease;
        opacity: 0;
      }

      @media (max-width:600px) {
        #bg-img-desktop { opacity:0; }
        #bg-img-mobile { opacity:1; }

        /* Hide tint box on mobile */
        .tint-box {
          display: flex;
          background-color: transparent;
          z-index: 11
          padding-top: 64px
          width: 100%
          max-width: 900px
          margin: 0 auto;
       .mast {
          width: 100%;
          max-width: none; /* remove restriction */
          padding-top: 16px;
          z-index: 11;
          display: flex;
          justify-content: center;
        }

      .mast img {
           width: 95%; /* fill available width */
          max-width: none; /* remove restriction */
          height: auto;
        }

        /* Mobile search panel adjustments */
        .search-panel {
          position: relative;
          z-index: 13;
          width:calc(100% - 20px);
          background-color: white;
          padding:16px;
        }
        .search-row { flex-direction:row; }
        .search-cta { background:#8b0000; flex:0 auto; }

        .cta-row { display:none; }
      }

      /* Mobile footer */
      .mobile-footer {
        display:none;
      }
      @media (max-width:600px){
        .mobile-footer {
          display:flex;
          position: fixed;
          bottom:0;
          left:0;
          right:0;
          background:#8b0000;
          color:white;
          font-size:14px;
          justify-content:center;
          align-items:center;
          height:50px;
          z-index:100005;
        }
      }
    </style>
  </head>

  <body>
    <!-- SiteHeader includes mobile section internally -->
    <SiteHeader />

    <!-- Background overlay -->
    <div id="bg-overlay" aria-hidden="true">
      <img id="bg-img-desktop" src="https://i.imgur.com/ZENogwV.png" alt="Desktop Background" />
      <img id="bg-img-mobile" src="https://i.imgur.com/9MP7c2f.png" alt="Mobile Background" />
    </div>

    <!-- Tint box and main content -->
    <div class="tint-box">
      <div class="mast">
        <img src="/assets/logo.png" alt="Soviet Trumpet Logo" />
      </div>

      <div class="search-panel">
        <h1 style="margin:0; font-size:18px; text-align:center; font-family:'Segoe UI', Arial, sans-serif;">Catalog of Soviet-Era trumpet music</h1>

        <form id="searchForm" action="/composers-results" method="get">
          <div class="search-row">
            <input id="q" name="q" class="search-input" placeholder="Search composers, countries, or pieces..." />
            <button id="searchBtn" type="submit" class="search-cta">Search</button>
          </div>
        </form>

        <div class="cta-row">
          <button class="cta-btn">Make additions to the archive</button>
          <button class="cta-btn">About this project</button>
          <button class="cta-btn">Randomize</button>
        </div>
      </div>
    </div>

    <!-- SiteFooter (desktop) -->
<SiteFooter />

<!-- Mobile footer -->
<div class="mobile-footer">Â© 2025 Soviet Trumpet Archive</div>

<!-- Mobile search placeholder script -->
<script is:inline>
  if (window.matchMedia("(max-width:600px)").matches) {
    const searchInput = document.getElementById('q');
    if (searchInput) {
      searchInput.placeholder = "Search on mobile...";
    }
  }
</script>
